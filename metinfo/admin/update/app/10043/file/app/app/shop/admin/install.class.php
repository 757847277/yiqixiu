<?phpdefined('IN_MET') or exit ('No permission');class install {	public function dosql() {		global $_M;		$no         = 10043;		$query      = "select * from {$_M['table']['applist']} where no='{$no}'";		$stall      = DB::get_one($query);		//dump($stall);		//echo 2222;		deldir('cache', 1);		if(!$stall){			$query = "INSERT INTO  {$_M['table']['applist']} SET no = '{$no}',ver = '2.0.4',m_name = 'shop',m_class = 'order_admin',m_action = 'doindex',appname = '商城模块',info  = '一款非常适用于企业电子商务 B2C 的营销型功能模块。采用「响应式设计」，能够自适应不同终端设备（手机、平板、电脑）；扁平化的界面和简洁的流程让用户购买体验极佳；目前支持「微信、支付宝、银联」三种常用支付接口（后续不断扩展国内外主流支付接口）；功能管理极简，不用担心管理界面繁杂；源码开放、接口齐全，可轻松扩展自己所需要的功能；安装后提供6个月免费更新服务（以半年为节点购买升级支持）'            ";			DB::query($query);			//数据库导入			$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_address` (  `id` int(11) NOT NULL auto_increment,  `uid` int(11) NOT NULL COMMENT '所属用户',  `de` int(1) NOT NULL COMMENT '默认收货地址',  `name` varchar(50) NOT NULL COMMENT '收件人',  `zone_p` varchar(50) NOT NULL COMMENT '省',  `zone_c` varchar(50) NOT NULL COMMENT '市',  `zone_d` varchar(50) NOT NULL COMMENT '区',  `zone_a` varchar(100) NOT NULL COMMENT '详细',  `tel` varchar(50) NOT NULL COMMENT '电话',  `fixed` varchar(50) NOT NULL COMMENT '固话',  `email` varchar(50) NOT NULL COMMENT '电子邮件地址',  `lang` varchar(50) NOT NULL COMMENT '所属语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_cart` (  `id` int(11) NOT NULL auto_increment,  `uid` int(11) NOT NULL COMMENT '用户ID',  `pid` int(11) NOT NULL COMMENT '商品ID',  `para_str` varchar(1000) NOT NULL COMMENT '字段信息',  `amount` int(11) NOT NULL COMMENT '数量',  `lang` varchar(50) NOT NULL,  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_discount` (  `id` int(11) NOT NULL auto_increment,  `name` varchar(50) NOT NULL COMMENT '优惠券名称',  `type` int(11) NOT NULL COMMENT '优惠券类型',  `par` double NOT NULL COMMENT '面值',  `r_price` double NOT NULL COMMENT '订单满多少才可以使用',  `s_time` int(11) NOT NULL COMMENT '开始时间',  `e_time` int(11) NOT NULL COMMENT '结束时间',  `amount` int(11) NOT NULL COMMENT '数量',  `one_user_have` int(11) NOT NULL COMMENT '限领取张数',  `receive` int(11) NOT NULL COMMENT '领取数',  `used` int(11) NOT NULL COMMENT '使用数',  `ugid` int(11) NOT NULL COMMENT '领取会员会员组条件',  `all_goods` int(1) NOT NULL COMMENT '是否全部商品',  `goods_list` varchar(5000) NOT NULL COMMENT '可以使用优惠劵产品列表',  `instructions` varchar(1000) NOT NULL COMMENT '使用说明',  `lang` varchar(50) NOT NULL COMMENT '语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_discount_coupon` (  `id` int(11) NOT NULL auto_increment,  `did` int(11) NOT NULL COMMENT '优惠券ID',  `uid` int(11) NOT NULL COMMENT '用户ID',  `usetime` int(11) NOT NULL COMMENT '使用时间',  `receivetime` int(11) NOT NULL COMMENT '领取时间',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_finance` (  `id` int(11) NOT NULL auto_increment,  `uid` int(11) NOT NULL COMMENT '用户ID',  `username` varchar(50) NOT NULL COMMENT '用户名',  `type` int(11) NOT NULL COMMENT '类型',  `reason` varchar(1000) NOT NULL COMMENT '事由',  `price` double NOT NULL COMMENT '金额',  `balance` double NOT NULL COMMENT '余额',  `addtime` int(11) NOT NULL COMMENT '添加时间',  `adminname` varchar(50) NOT NULL COMMENT '操作人',  `lang` varchar(50) NOT NULL COMMENT '语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_logistics` (  `id` int(11) NOT NULL auto_increment,  `name` varchar(50) NOT NULL COMMENT '模板名称',  `lang` varchar(50) NOT NULL COMMENT '所属语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_logistics_zone` (  `id` int(11) NOT NULL auto_increment,  `lid` int(11) NOT NULL COMMENT '所属模板ID',  `zone` varchar(200) NOT NULL COMMENT '区域',  `first` int(11) NOT NULL COMMENT '首件',  `freight` double NOT NULL COMMENT '运费',  `addp` int(11) NOT NULL COMMENT '续件',  `renew` double NOT NULL COMMENT '续费',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_order` (  `id` int(11) NOT NULL auto_increment,  `orderid` varchar(20) character set utf8 collate utf8_bin NOT NULL COMMENT '订单ID',  `type` int(1) NOT NULL COMMENT '订单类型',  `uid` int(11) NOT NULL COMMENT '用户ID',  `username` varchar(50) NOT NULL COMMENT '用户名',  `state` int(2) NOT NULL COMMENT '订单状态',  `tel` varchar(20) NOT NULL COMMENT '电话',  `email` varchar(50) NOT NULL COMMENT '邮件',  `message` varchar(1000) NOT NULL COMMENT '订单留言',  `address` varchar(500) NOT NULL COMMENT '收货地址',  `price` double NOT NULL COMMENT '商品金额',  `cprice` double NOT NULL COMMENT '修改总金额',  `tprice` double NOT NULL COMMENT '订单总金额',  `discount` double NOT NULL COMMENT '折扣价格',  `discount_info` varchar(200) NOT NULL COMMENT '折扣信息',  `discount_use` int(1) NOT NULL COMMENT '修改总金额后是否可以继续使用折扣',  `freight` double NOT NULL COMMENT '运费',  `cinfo` varchar(50) NOT NULL COMMENT '物流公司',  `oinfo` varchar(50) NOT NULL COMMENT '物流单号',  `paytype` int(1) NOT NULL COMMENT '付款方式',  `payinfo` varchar(200) NOT NULL COMMENT '付款信息',  `invoice` int(1) NOT NULL COMMENT '是否需要发票',  `invoice_info` varchar(500) NOT NULL COMMENT '发票信息',  `remark` varchar(1000) NOT NULL COMMENT '备注',  `rtime` int(11) NOT NULL COMMENT '下订单时间',  `ptime` int(11) NOT NULL COMMENT '付款时间',  `stime` int(11) NOT NULL COMMENT '发货时间',  `ctime` int(11) NOT NULL COMMENT '关闭订单时间',  `search` text NOT NULL COMMENT '信息搜索字段',  `lang` varchar(50) NOT NULL COMMENT '所属语言',  PRIMARY KEY  (`id`),  UNIQUE KEY `orderid` (`orderid`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_order_goods` (  `id` int(11) NOT NULL auto_increment,  `pid` int(11) NOT NULL COMMENT '商品ID',  `pname` varchar(100) NOT NULL COMMENT '商品名称',  `pamount` int(11) NOT NULL COMMENT '商品数量',  `puprice` double NOT NULL COMMENT '单价',  `rid` varchar(20) NOT NULL COMMENT '订单ID',  `para` varchar(1000) NOT NULL COMMENT '商品字段信息',  `message` varchar(1000) NOT NULL COMMENT '商品留言信息',  `freight` double NOT NULL COMMENT '运费',  `price` double NOT NULL COMMENT '小计总价',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);			$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_order_statistics` (  `id` int(11) NOT NULL auto_increment,  `start_time` int(11) NOT NULL COMMENT '开始时间',  `statistics_time` int(11) NOT NULL COMMENT '统计时间',  `order_number` int(11) NOT NULL COMMENT '下订单数',  `income` double NOT NULL COMMENT '收入',  `order_user` int(11) NOT NULL COMMENT '下单人数',  `order_user_list` text NOT NULL COMMENT '下单用户ID列表',  `lang` varchar(50) NOT NULL COMMENT '语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_para` (  `id` int(11) NOT NULL auto_increment,  `value` varchar(100) NOT NULL COMMENT '字段名称',  `valuelist` varchar(1000) NOT NULL COMMENT '字段值',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_plist` (  `id` int(11) NOT NULL auto_increment,  `pid` int(11) NOT NULL COMMENT '商品ID',  `price` double NOT NULL COMMENT '价格',  `valuelist` varchar(500) NOT NULL COMMENT '字段值',  `stock` int(11) NOT NULL COMMENT '库存',  `sales` int(11) NOT NULL COMMENT '销量',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_product` (  `pid` int(11) NOT NULL COMMENT '商品ID',  `paralist` varchar(1000) NOT NULL COMMENT '商品用户选择字段信息',  `searchlist` varchar(1000) NOT NULL COMMENT '用于列表页搜索的字段',  `logistic` int(1) NOT NULL default '0' COMMENT '是否需要物流',  `price` double NOT NULL default '0' COMMENT '价格',  `stock` int(11) NOT NULL COMMENT '库存',  `stock_show` int(1) NOT NULL default '1' COMMENT  '前台是否显示库存',  `sales` int(11) NOT NULL COMMENT '销量',  `original` double NOT NULL default '0' COMMENT '原价',  `freight_mould` int(11) NOT NULL default '0' COMMENT '运费模板',  `freight` double NOT NULL COMMENT '运费',  `purchase` int(1) NOT NULL default '0' COMMENT '限购',  `lnvoice` int(11) NOT NULL COMMENT '是否发票',  `message` varchar(500) NOT NULL COMMENT '留言字段信息',  `user_discount` text NOT NULL COMMENT '会员折扣',  PRIMARY KEY  (`pid`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_searchlist` (  `id` int(11) NOT NULL auto_increment,  `no_order` int(11) NOT NULL COMMENT '排序',  `name` varchar(100) NOT NULL COMMENT '名称',  `lang` varchar(50) NOT NULL COMMENT '语言',  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);			$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_searchlist_tag` (  `id` int(11) NOT NULL auto_increment,  `sid` int(11) NOT NULL COMMENT '父ID',  `no_order` int(11) NOT NULL COMMENT '排序',  `name` varchar(50) NOT NULL COMMENT '名称',  `title` varchar(50) NOT NULL COMMENT '页面标题',  `keywords` varchar(1000) NOT NULL COMMENT '页面关键词',  `description` varchar(1000) NOT NULL COMMENT '页面描述',  `url` varchar(100) NOT NULL,  PRIMARY KEY  (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";			DB::query($query);						$query = "CREATE TABLE IF NOT EXISTS `{$_M['config']['tablepre']}shopv2_user` (  `uid` int(11) NOT NULL COMMENT '用户ID',  `username` varchar(50) NOT NULL COMMENT '用户名',  `goods_list` text NOT NULL COMMENT '已购买商品列表',  `balance` double NOT NULL COMMENT '余额',  PRIMARY KEY  (`uid`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;";			DB::query($query);						add_table('shopv2_address|shopv2_cart|shopv2_discount|shopv2_discount_coupon|shopv2_finance|shopv2_logistics|shopv2_logistics_zone|shopv2_order|shopv2_order_goods|shopv2_para|shopv2_plist|shopv2_product|shopv2_searchlist|shopv2_skin_table|shopv2_user|shopv2_searchlist_tag|shopv2_order_statistics');						/*			$this->config_insert('shopv2_payuid');			$this->config_insert('shopv2_paypid');			$this->config_insert('shopv2_paycid');			$this->config_insert('shopv2_wxuid');			$this->config_insert('shopv2_wxpid');			$this->config_insert('shopv2_wxcid');			$this->config_insert('shopv2_wxbid');			*/						$this->config_insert('shopv2_adminemail');			$this->config_insert('shopv2_admintel');						$this->config_insert('shopv2_is_usmsv1', '0');			$this->config_insert('shopv2_usmsv1', '您的订单已经下单成功，请在30分钟内付款，超过30分钟订单将被关闭！');			$this->config_insert('shopv2_is_uemailv1', '0');					$this->config_insert('shopv2_uemailtv1', '订单下单成功');			$this->config_insert('shopv2_uemailcv1', '您的订单已经下单成功，请在30分钟内付款，超过30分钟订单将被关闭！');			$this->config_insert('shopv2_is_usmsv2', '0');			$this->config_insert('shopv2_usmsv2', '您的订单已经付款成功，我们将会及时安排时间为您发货！');			$this->config_insert('shopv2_is_uemailv2', '0');			$this->config_insert('shopv2_uemailtv2', '订单付款成功');			$this->config_insert('shopv2_uemailcv2', '您的订单已经付款成功，我们将会及时安排时间为您发货！');			$this->config_insert('shopv2_is_usmsv3', '0');			$this->config_insert('shopv2_usmsv3', '您的订单已经发货，请注意收货！');			$this->config_insert('shopv2_is_uemailv3', '0');			$this->config_insert('shopv2_uemailtv3', '订单已经发货');			$this->config_insert('shopv2_uemailcv3', '您的订单已经发货，请注意收货！');			$this->config_insert('shopv2_onlinepay', '1');			$this->config_insert('shopv2_deliverypay', '0');			$this->config_insert('shopv2_gi', '0');			$this->config_insert('shopv2_vat', '0');			$this->config_insert('shopv2_ei', '0');			$this->config_insert('shopv2_invoice');			$this->config_insert('shopv2_open', '0');			$this->config_insert('shopv2_order_end', '1440');			$this->config_insert('shopv2_order_close', '10080');			//$this->config_insert('shopv2_bankinfo');			$this->config_insert('shopv2_sinfo');			$this->config_insert('shopv2_skin_user', 'shopv2');			$this->config_insert('shopv2_wap_skin_user', 'shopv2_mobile');						$this->config_insert('shopv2_order_auto_close', '0');			$this->config_insert('shopv2_order_auto_close_time', '90');			$this->config_insert('shopv2_order_auto_ok', '0');			$this->config_insert('shopv2_order_auto_ok_time', '7');			$this->config_insert('shopv2_order_auto_del', '0');			$this->config_insert('shopv2_order_auto_del_time', '30');						$this->config_insert('shopv2_price_str_prefix');			$this->config_insert('shopv2_price_str_suffix', '元');			$this->lang_insert('app_shop_original', '原价');			$this->lang_insert('app_shop_stock', '库存');			$this->lang_insert('app_shop_piece', '件');			$this->lang_insert('app_shop_purchase', '每人限购');			$this->lang_insert('app_shop_number', '数量');			$this->lang_insert('app_shop_buyimmediately', '立即购买');			$this->lang_insert('app_shop_tocart', '加入购物车');			$this->lang_insert('app_shop_details', '商品详情');			$this->lang_insert('app_shop_recommend', '热门推荐');			$this->lang_insert('app_shop_emptycart', '购物车中还没有商品，赶紧选购吧！');			$this->lang_insert('app_shop_register', '注册');			$this->lang_insert('app_shop_login', '登录');			$this->lang_insert('app_shop_personal', '个人中心');			$this->lang_insert('app_shop_myorder', '我的订单');			$this->lang_insert('app_shop_settings', '账户设置');			$this->lang_insert('app_shop_out', '退出');			$this->lang_insert('app_shop_cart', '购物车');			$this->lang_insert('app_shop_commodity', '商品');			$this->lang_insert('app_shop_intotal', '共');			$this->lang_insert('app_shop_gosettlement', '去购物车结算');			$this->lang_insert('app_shop_tocartok', '已成功加入购物车！');			$this->lang_insert('app_shop_continue', '继续购物');			$this->lang_insert('app_shop_moregoods', '购买该商品的用户还购买了');			$this->lang_insert('app_shop_checkall', '全选');			$this->lang_insert('app_shop_total', '合计');			$this->lang_insert('app_shop_gosettlementabbr', '去结算');			$this->lang_insert('app_shop_goshopping', '马上去购物');			$this->lang_insert('app_shop_ok', '确定');			$this->lang_insert('app_shop_cancel', '取消');			$this->lang_insert('app_shop_deleteok', '确定要删除吗?');			$this->lang_insert('app_shop_price', '单价');			$this->lang_insert('app_shop_subtotal', '小计');			$this->lang_insert('app_shop_operation', '操作');			$this->lang_insert('app_shop_errorrefresh', '数据错误，请重新刷新页面！');			$this->lang_insert('app_shop_oos', '缺货');			$this->lang_insert('app_shop_address', '收货地址');			$this->lang_insert('app_shop_addto', '添加');			$this->lang_insert('app_shop_paymentmod', '支付方式');			$this->lang_insert('app_shop_paymentonline', '在线支付');			$this->lang_insert('app_shop_paymentcod', '货到付款');			$this->lang_insert('app_shop_delivery', '配送方式');			$this->lang_insert('app_shop_invoice', '发票');			$this->lang_insert('app_shop_unwanted', '不需要');			$this->lang_insert('app_shop_need', '需要');			$this->lang_insert('app_shop_invoicecontent', '发票内容');			$this->lang_insert('app_shop_return', '返回');			$this->lang_insert('app_shop_message', '给商家留言，选填');			$this->lang_insert('app_shop_placeorder', '提交订单');			$this->lang_insert('app_shop_pleaseaddress', '请设置收获地址');			$this->lang_insert('app_shop_freefreight', '免运费');			$this->lang_insert('app_shop_ordersuccess', '订单提交成功！去付款咯~');			$this->lang_insert('app_shop_please', '请在');			$this->lang_insert('app_shop_pleasepayment', '内完成支付, 超时后将取消订单');			$this->lang_insert('app_shop_ordernumber', '订单号');			$this->lang_insert('app_shop_orderdetails', '订单详情');			$this->lang_insert('app_shop_receiving', '收货信息');			$this->lang_insert('app_shop_paytotal', '应付总额');			$this->lang_insert('app_shop_paymod', '选择以下支付方式付款');			$this->lang_insert('app_shop_paybalance', '余额支付');			$this->lang_insert('app_shop_payinsufficient', '余额不足');			$this->lang_insert('app_shop_loginpassword', '登录密码');			$this->lang_insert('app_shop_allvalidorders', '全部有效订单');			$this->lang_insert('app_shop_bepaid', '待支付');			$this->lang_insert('app_shop_receipt', '待收货');			$this->lang_insert('app_shop_closed', '已关闭');			$this->lang_insert('app_shop_commodityname', '商品名称');			$this->lang_insert('app_shop_moreorder', '查看更多订单');			$this->lang_insert('app_shop_orderamount', '订单金额');			$this->lang_insert('app_shop_topay', '去付款');			$this->lang_insert('app_shop_noorders', '没有符合条件的订单');			$this->lang_insert('app_shop_cancelorder', '取消订单');			$this->lang_insert('app_shop_placeorderabbr', '下单');			$this->lang_insert('app_shop_payment', '付款');			$this->lang_insert('app_shop_deliver', '发货');			$this->lang_insert('app_shop_complete', '完成');			$this->lang_insert('app_shop_nologistics', '无需物流');			$this->lang_insert('app_shop_logisticsinfo', '物流信息');			$this->lang_insert('app_shop_express', '快递配送');			$this->lang_insert('app_shop_messageabbr', '买家留言');			$this->lang_insert('app_shop_freight', '运费');			$this->lang_insert('app_shop_discount', '优惠');			$this->lang_insert('app_shop_modifyprice', '涨价/减免');			$this->lang_insert('app_shop_paid', '实付金额');			$this->lang_insert('app_shop_cancelorderok', '确定要取消订单吗?');			$this->lang_insert('app_shop_consigneename', '收货人姓名');			$this->lang_insert('app_shop_consigneetel', '收货人电话');			$this->lang_insert('app_shop_consigneeaddress', '详细地址');			$this->lang_insert('app_shop_save', '保存');			$this->lang_insert('app_shop_balance', '账户余额');			$this->lang_insert('app_shop_allorders', '查看所有订单');			$this->lang_insert('app_shop_consumer', '消费明细');			$this->lang_insert('app_shop_modifyinfo', '修改个人信息');			$this->lang_insert('app_shop_accountrecharge', '账户充值');			$this->lang_insert('app_shop_time', '时间');			$this->lang_insert('app_shop_money', '金额');			$this->lang_insert('app_shop_reason', '事由');			$this->lang_insert('app_shop_rechargemoney', '充值金额');			$this->lang_insert('app_shop_ordercenter', '订单中心');			$this->lang_insert('app_shop_error', '数据错误');			$this->lang_insert('app_shop_saveok', '保存成功');			$this->lang_insert('app_shop_delok', '删除成功');			$this->lang_insert('app_shop_success', '操作成功');			$this->lang_insert('app_shop_lowstocks', '您订购的商品库存不足！');			$this->lang_insert('app_shop_lowpurchase', '您订购的商品超过限购！');			$this->lang_insert('app_shop_del', '删除');			$this->lang_insert('app_shop_noaccess', '您无权限查看此订单');			$this->lang_insert('app_shop_nosckpce', '您所订购的商品缺货或者超过订购限额');			$this->lang_insert('app_shop_havepay', '此订单已经付款');			$this->lang_insert('app_shop_precmoney', '请输入充值金额！');			$this->lang_insert('app_shop_payok', '付款成功！');			$this->lang_insert('app_shop_passno', '密码错误');			$this->lang_insert('app_shop_errornopay', '系统出错，无法付款！');			$this->lang_insert('app_shop_noopaccess', '您没有权限操作此订单');			$this->lang_insert('app_shop_order', '订单');			$this->lang_insert('app_shop_topaynow', '立即付款');			$this->lang_insert('app_shop_invoicehead', '请输入发票抬头');			$this->lang_insert('app_shop_scanpayment', '微信扫码支付');			$this->lang_insert('app_shop_beingpaid', '正在支付...');			$this->lang_insert('app_shop_paidok', '支付成功');			$this->lang_insert('app_shop_paiderror', '支付失败');						$query = "SELECT * FROM {$_M['table']['app_plugin']} WHERE no='{$no}";			if(!DB::get_one($query)){				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doweb',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doproduct_list',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doproduct_show',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doproduct_plugin_class',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='temporary_plugin_product_list',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doadmin',effect=0";				DB::query($query);				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='doseourl',effect=0";				$query = "INSERT INTO {$_M['table']['app_plugin']} SET no_order='0',no='{$no}',m_name='shop',m_action='dopay',effect=0";				DB::query($query);			}									$query      = "SELECT * FROM {$_M['table']['config']} WHERE name='met_tablename'";			$tablenames = DB::get_one($query);			//支付模块信息表			if(!is_strinclude($tablenames['value'], 'pay_config')) {				$table = $_M['config']['tablepre'].'pay_config';				$query = "CREATE TABLE IF NOT EXISTS {$table} (`id` int(11) NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`value` text NOT NULL,`mobile_value` text,`columnid` int(11),`flashid` int(11),`lang` varchar(50) NOT NULL,PRIMARY KEY (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8;";				DB::query($query);				add_table('pay_config');				$query    = "SELECT * FROM {$_M['table']['pay_config']} WHERE name='model_name'";				$pageinfo = DB::get_one($query);				if(!$pageinfo) {					$pageinfo['value'] = '在线支付';					$query = "INSERT INTO {$_M['table']['pay_config']} SET value='{$pageinfo['value']}',name='model_name',mobile_value='',columnid='',flashid='',lang='metinfo'";					DB::query($query);				}				$query    = "SELECT * FROM {$_M['table']['pay_config']} WHERE name='payment_open'";				$pageinfo = DB::get_one($query);				if(!$pageinfo) {					$pageinfo['value'] = '1';					$query = "INSERT INTO {$_M['table']['pay_config']} SET value='{$pageinfo['value']}',name='payment_open',mobile_value='',columnid='',flashid='',lang='payment'";					DB::query($query);				}				if($_M['config']['met_title_type'] == 0){					$_M['tem_data']['title'] = $pageinfo['value'];				}else if($_M['config']['met_title_type'] == 1){					$_M['tem_data']['title'] = $pageinfo['value'].'-'.$_M['config']['met_keywords'];				}else if($_M['config']['met_title_type'] == 2){					$_M['tem_data']['title'] = $pageinfo['value'].'-'.$_M['config']['met_webname'];				}else if($_M['config']['met_title_type'] == 3){					$_M['tem_data']['title'] = $pageinfo['value'].'-'.$_M['config']['met_keywords'].'-'.$_M['config']['met_webname'];				}			}			//接口参数表			if(!is_strinclude($tablenames['value'], 'pay_api')) {				$table = $_M['config']['tablepre'].'pay_api';				$query = "CREATE TABLE IF NOT EXISTS {$table} (`id` int(11) NOT NULL AUTO_INCREMENT,`name` varchar(50) NOT NULL,`paytype` varchar(255) NOT NULL,`value` varchar(255) NOT NULL,PRIMARY KEY (`id`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;";				DB::query($query);				add_table('pay_api');			}			//订单存储表			if(!is_strinclude($tablenames['value'], 'pay_order')) {				$table = $_M['config']['tablepre'].'pay_order';				$query = "CREATE TABLE IF NOT EXISTS {$table} (`id` int(11) NOT NULL AUTO_INCREMENT,`no` int(11) NOT NULL,`callback_url` varchar(255),`out_trade_no` varchar(32) NOT NULL,`subject` varchar(255) NOT NULL,`product_id` varchar(32),`body` varchar(128),`goods_tag` varchar(32),`attach` varchar(127),`show_url` varchar(255),`total_fee` decimal(9,2) NOT NULL,`order_time` datetime NOT NULL,`pay_time` datetime,`pay_type` int(1),`callback` int(1),`status` int(1),PRIMARY KEY (`id`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;";				DB::query($query);				add_table('pay_order');			}					}else{			//2.0.1			$this->config_insert('shopv2_order_auto_del_time', $_M['config']['shopv2_order_del_ok_time']);						//2.0.2			$query = "UPDATE {$_M['table']['applist']} SET ver='2.0.4' WHERE no = '{$no}'";			DB::query($query);					}	}					public function config_insert($name, $value, $lang = ''){		global $_M;		if($lang == 'metinfo'){			$query = "SELECT * FROM {$_M['table']['config']} WHERE name='{$name}' AND lang='metinfo'";			if(!DB::query($query)){				$query = "INSERT INTO {$_M['table']['config']} SET name='{$name}',value='{$value}',mobile_value='',columnid=0,flashid=0,lang='metinfo'";				DB::query($query);			}		}else{		//dump($_M['langlist']['web']);			foreach($_M['langlist']['web'] as $key=>$val){				$query = "SELECT * FROM {$_M['table']['config']} WHERE name='{$name}' AND lang='{$val['mark']}'";				if(!DB::get_one($query)){				$query = "INSERT INTO {$_M['table']['config']} SET name='{$name}',value='{$value}',mobile_value='',columnid=0,flashid=0,lang='{$val['mark']}'";				DB::query($query);				}							}		}	}	public function lang_insert($name, $value, $lang = ''){		global $_M;		foreach($_M['langlist']['web'] as $key=>$val){			$query = "SELECT * FROM {$_M['table']['language']} WHERE name='{$name}' AND lang='{$val['mark']}' AND app='10043'";			if(!DB::get_one($query)){				$query = "INSERT INTO {$_M['table']['language']} SET name='{$name}',value='{$value}',site='0',no_order=0,array=0,app='10043',lang='{$val['mark']}'";				DB::query($query);			}			}	}		public function lang_admin_insert($name, $value, $lang = ''){		global $_M;		foreach($_M['langlist']['admin'] as $key=>$val){			$query = "SELECT * FROM {$_M['table']['language']} WHERE name='{$name}' AND lang='{$val['mark']}' AND app='10043'";			if(!DB::get_one($query)){				$query = "INSERT INTO {$_M['table']['language']} SET name='{$name}',value='{$value}',site='1',no_order=0,array=0,app='10043',lang='{$val['mark']}'";				DB::query($query);			}			}	}}?>